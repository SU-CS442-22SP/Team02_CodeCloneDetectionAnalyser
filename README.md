# SimpleCC

A simple code clone detection tool to detect type-2 clones in Java source files.


## Build

This program is developed using Java8, Eclipse, and Maven.
You can import this project to your Eclipse (or your IDE).

The `simplecc.jar` file is an executable jar file of the program.

## Usage

The program takes as arguments a list of source files and directories to be analyzed.
Only "*.java" files are analyzed.

You can execute a jar file directly if you have a Java runtime.

    java -jar simplecc.jar src

If you compiled the program by yourself, select `jp.naist.se.simplecc.CloneDetectionMain` as a main class.  

    java jp.naist.se.simplecc.CloneDetectionMain src

The program reports a list of code clone pairs in the files.

    <pair>
    CloneDetectionMain.java,96,39,96,135,...
    CloneDetectionMain.java,96,105,96,206,...
    </pair>

Each line shows a file name, line numbers and char positions in the lines indicating the beginning and the end of a cloned code fragment.
A line also includes source code tokens in the fragment. 


## Program Structure

The program comprises four classes.

* CloneDetectionMain is the main class.  
  * `readFiles()` extracts a list of tokens.  All source files are concatenated with a file termination token. 
  * `getNormalizedText()` implements a normalization rule.  The current implementation regards type name keywords and identifiers as the same token.
  * `detectClones()` extracts longest common substrings in the list.
  If a common substring is longer than a threshold, it is reported as clone.
  The naive implementation takes O(n^2) computation (n is the total number of tokens in source files).
* CodeToken represents a token.  
* DirectoryScan is a utility class to list all files in a directory.
* Java8Lexer is a lexical analyzer generated by ANTLR4.  


## LICENSE

This program is distributed under the MIT license (see LICENSE file).

This program uses ANTLR4 distributed under the BSD license ([http://www.antlr.org/license.html]).
